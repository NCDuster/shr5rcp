--- RCPTT testcase ---
Format-Version: 1.0
Element-Name: lifestyle-rule-1
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: _onIqQCAzEeWSRorpcoiIvw
Runtime-Version: 2.0.0.201506120617
Save-Time: 7/1/15 11:27 PM
Tags: character-generation, lifemodule
Testcase-Type: ecl

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

get-view "Model Explorer" | get-tree 
    | select "shr5Resources/All/Gamemaster my game stuff/Character Group non player group"
get-menu "Character/Character Generator wizard" | click
with [get-window "Select generator object to create ..."] {
    get-tree | select "Life module Generator"
    get-button "Next >" | click
}
get-window -class WizardDialog | get-combo -after [get-label "Select campaign"] 
    | select "Life Modules System testLifeModuleSystem"
get-window -class WizardDialog | get-label "" -after [get-label "Select Group"] -index 1 | get-property "image.path" 
    | equals "de.urszeidler.shr5.ecp/images/SumToTenGenerator32.png" | verify-true
with [get-window -class WizardDialog] {
    get-button Finish | click
    get-window "Switch Perspective" | get-button Yes | click
}
get-editor "Life Modules Generator" | get-button "Choose the options." | get-property "isEnabled()" | equals true 
    | verify-true
get-view "Character rule validation" | get-tree | get-property itemCount | equals 8 | verify-true
with [get-editor "Life Modules Generator"] {
    get-section choose | get-button "None player" | click
    with [get-group Overview | get-editbox -after [get-label "Character Name"]] {
         set-text "Test-lifemodule"
    }
}
get-editor "Life Modules Generator" | get-group Overview | get-editbox -after [get-label "Character Name"] 
    | get-property text | equals "Test-lifemodule" | verify-true
with [get-view "Character rule validation"] {
    get-label "Test-lifemodule" | get-property caption | equals "Test-lifemodule" | verify-true
    get-tree | get-item "The required feature 'Character' of 'Life Modules Generator Test-lifemodule' must be set" 
        | get-property caption 
        | equals "The required feature 'Character' of 'Life Modules Generator Test-lifemodule' must be set" 
        | verify-true
}
get-editor "Life Modules Generator" | get-section choose | get-link "nothing selected" | click
with [get-window -class OwnChooseDialog] {
    get-tree | select "Meta Type 50 \\[Species Dwarf\\] \\(0\\)"
    get-button OK | click
}
get-view "Character rule validation" | get-tree | get-property itemCount | equals 6 | verify-true
get-editor "Life Modules Generator" | get-section choose | get-link "nothing selected" | click
with [get-window -class OwnChooseDialog] {
    get-tree | select "Mudan 0"
    get-button OK | click
}
get-view "Character rule validation" | get-tree | get-property itemCount | equals 5 | verify-true
get-editor "Life Modules Generator" | get-section choose 
    | get-link "nothing selected" | click
get-window -class OwnChooseDialog | get-tree | select "UCAS Canada \\[nationality\\] karma: 15 years: 0" | click 
    -default
get-view "Character rule validation" | get-tree | get-property itemCount | equals 4 | verify-true
get-editor "Life Modules Generator" | get-section choose | get-link "nothing selected" | click
with [get-window -class OwnChooseDialog] {
    get-tree | select "FUGITIVE \\[formativeYears\\] karma: 40 years: 10"
    get-button OK | click
}
get-view "Character rule validation" | get-tree | get-property itemCount | equals 3 | verify-true
get-editor "Life Modules Generator" | get-section choose | get-link "nothing selected" | click
get-window -class OwnChooseDialog | get-tree | select "STREET KID \\[teenYears\\] karma: 50 years: 7" | click -default
get-view "Character rule validation" | get-tree | get-property itemCount | equals 2 | verify-true
get-editor "Life Modules Generator" | get-section choose | get-button -after [get-label "Real Life"] | click
with [get-window "-- Life Modules Generator Test-lifemodule"] {
    with [get-table] {
        select "COMBAT CORRESPONDENT [realLife] karma: 100 years: 4" | double-click
        select "LAW ENFORCEMENT (Beat Cop) [realLife] karma: 100 years: 4" | double-click
    }
    get-button OK | click
}
get-view "Character rule validation" | get-tree | get-property itemCount | equals 1 | verify-true
get-editor "Life Modules Generator" | get-button "Create the character with the choosen options." 
    | get-property "isEnabled()" | equals true | verify-true
with [get-editor "Life Modules Generator" | get-section choose] {
    get-label 50 | get-property caption | equals 50 | verify-true
    get-label 305 | get-property caption | equals 305 | verify-true
    get-label 25 | get-property caption | equals 25 | verify-true
}
get-editor "Life Modules Generator" | get-button "Create the character with the choosen options." | click
get-window "Select a skill" | get-tree | select "Language skill German" | click -default
get-window "Select a skill" | get-tree | select "Language skill Croatian" | click -default
get-window "Select a skill" | get-tree | select "Language skill Danish" | click -default
with [get-view "Character rule validation" | get-tree] {
    get-property itemCount | equals 3 | verify-true
    get-item "You need to satisfy all character building rules before commit." | get-property caption 
        | equals "You need to satisfy all character building rules before commit." | verify-true
    get-item "You need to choose a lifestyle for NPC Mudan Persona Test-lifemodule. A lifestyle is a contract." 
        | get-property caption 
        | equals "You need to choose a lifestyle for NPC Mudan Persona Test-lifemodule. A lifestyle is a contract." 
        | verify-true
    get-item "You have to spend more karma points 395." | get-property caption 
        | equals "You have to spend more karma points 395." | verify-true
}
with [get-editor "Life Modules Generator"] {
    with [get-section create | get-editbox -after [get-label "Karma to resources"]] {
        double-click
        double-click
    }
    with [get-tab-folder] {
        get-tab-item Persona | click
        get-tab-item Character | click
        get-tab-item Persona | click
        get-tab-item "Life module generator" | click
    }
    get-section create | get-editbox -after [get-label "Karma to resources"] | key-type Up
    get-group Overview | get-link "Life Modules System testLifeModuleSystem" | click
}
get-window -class OwnChooseDialog | get-tree | select "Life Modules System Building the lifemodule system" | click 
    -default
with [get-editor "Life Modules Generator"] {
    get-section create | get-editbox -after [get-label "Karma to resources"] | double-click
    get-tab-folder | get-tab-item Persona | click
    with [get-section Attributes] {
        with [get-group Mental] {
            get-editbox -after [get-label Logic] | set-text 3
            get-editbox -after [get-label Intuition] | set-text 4
            get-editbox -after [get-label Charisma] | set-text 4
        }
        get-group Physical | get-editbox -after [get-label Agility] | set-text 5
        click
    }
    with [get-section Skills] {
        with [get-tree] {
            select "Skill group Athletics/Skill Gymnastics" | activate-cell-edit -column 2
            get-editbox | set-text 5
            apply-cell-edit -deactivate
            select "Skill group Athletics/Skill Running" | activate-cell-edit -column 2
            get-editbox | set-text 5
            apply-cell-edit -deactivate
            select "Skill group Close Combat/Skill Blades" | activate-cell-edit -column 2
            get-editbox | set-text 4
            apply-cell-edit -deactivate
            select "Skill group Close Combat/Skill Clubs" | activate-cell-edit -column 2
            get-editbox | set-text 5
            apply-cell-edit -deactivate
            select "Skill group Firearms/Skill Automatics" | activate-cell-edit -column 2
            get-editbox | set-text 3
            apply-cell-edit -deactivate
            select "Skill group Firearms/Skill Longarms" | activate-cell-edit -column 2
            get-editbox | set-text 4
            apply-cell-edit -deactivate
            select "Skill group Firearms/Skill Longarms"
        }
        click
    }
    with [get-tab-folder] {
        get-tab-item Character | click
        get-tab-item "Life module generator" | click
    }
    with [get-section create | get-editbox -after [get-label "Karma to resources"]] {
        double-click
        double-click
        set-text "0.0"
    }
}
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
